/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/density-clustering@1.3.0/lib/DBSCAN.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 * DBSCAN - Density based clustering
 *
 * @author Lukasz Krawczyk <contact@lukaszkrawczyk.eu>
 * @copyright MIT
 */
function DBSCAN(t,s,i,e){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,s,i,e)}DBSCAN.prototype.run=function(t,s,i,e){this._init(t,s,i,e);for(var n=0;n<this._datasetLength;n++)if(1!==this._visited[n]){this._visited[n]=1;var h=this._regionQuery(n);if(h.length<this.minPts)this.noise.push(n);else{var r=this.clusters.length;this.clusters.push([]),this._addToCluster(n,r),this._expandCluster(r,h)}}return this.clusters},DBSCAN.prototype._init=function(t,s,i,e){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}s&&(this.epsilon=s),i&&(this.minPts=i),e&&(this.distance=e)},DBSCAN.prototype._expandCluster=function(t,s){for(var i=0;i<s.length;i++){var e=s[i];if(1!==this._visited[e]){this._visited[e]=1;var n=this._regionQuery(e);n.length>=this.minPts&&(s=this._mergeArrays(s,n))}1!==this._assigned[e]&&this._addToCluster(e,t)}},DBSCAN.prototype._addToCluster=function(t,s){this.clusters[s].push(t),this._assigned[t]=1},DBSCAN.prototype._regionQuery=function(t){for(var s=[],i=0;i<this._datasetLength;i++){this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&s.push(i)}return s},DBSCAN.prototype._mergeArrays=function(t,s){for(var i=s.length,e=0;e<i;e++){var n=s[e];t.indexOf(n)<0&&t.push(n)}return t},DBSCAN.prototype._euclideanDistance=function(t,s){for(var i=0,e=Math.min(t.length,s.length);e--;)i+=(t[e]-s[e])*(t[e]-s[e]);return Math.sqrt(i)},"undefined"!=typeof module&&module.exports&&(module.exports=DBSCAN);
//# sourceMappingURL=/sm/043458c645d2f6f9aa932201a87143dc0709b520ca599e7a4d6c198096154291.map